<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lecture: PostGIS for Public Health Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Visualization & Content Choices:
        - Limitations Table (Part 1): HTML table. Goal: Compare. Interaction: Static. Justification: Clear side-by-side comparison.
        - Geometry Types (Part 2): HTML/CSS cards. Goal: Inform/Organize. Interaction: Click to reveal details/examples for Point, Line, Polygon. Justification: Interactive learning of core concepts.
        - SRID Concept (Part 2): HTML/CSS visual placeholder. Goal: Inform. Interaction: Static visual description. Justification: Illustrate alignment concept.
        - R/Python Code (Part 3): HTML `<pre>` blocks with JS for copy. Goal: Inform/Provide. Interaction: Copy button. Justification: Easy access to usable code.
        - Use Cases (Part 4): HTML/CSS cards with text-based "map" descriptions. Goal: Illustrate. Interaction: Static, clear presentation of examples. Justification: Show practical application.
        - Pop Quiz (New): HTML structure for 5 MCQs. Goal: Assess/Reinforce. Interaction: Click "Show Answer" button to reveal correct answer and rationale for each question. Justification: Active recall and self-assessment of key lecture points.
        - NO SVG/Mermaid used. All visuals are HTML/CSS based or textual descriptions. Chart.js/Plotly.js not required as the source material is textual/conceptual. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFAF0; /* bg-amber-50 */
            color: #262626; /* text-neutral-800 */
        }
        .sidebar {
            background-color: #F5F5F5; /* neutral-100 for slight contrast */
            border-right: 1px solid #E5E5E5; /* neutral-300 */
            transition: transform 0.3s ease;
        }
        .sidebar.mobile-hidden {
            /* Transform only applied on mobile via media query */
        }
        .nav-link {
            color: #065F46; /* emerald-700 */
            transition: all 0.3s ease;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #D1FAE5; /* emerald-100 */
            color: #047857; /* emerald-600 */
            border-left: 3px solid #065F46; /* emerald-700 */
            padding-left: calc(1rem - 3px);
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .key-takeaway {
            background-color: #ECFDF5; /* emerald-50 */
            border-left: 4px solid #10B981; /* emerald-500 */
            padding: 1rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.375rem;
        }
        .key-takeaway strong {
            color: #065F46; /* emerald-700 */
        }
        h1, h2, h3 {
            color: #065F46; /* emerald-700 */
            margin-bottom: 0.75rem;
        }
        h1.text-3xl { /* Specific for main section titles */
             color: #064E3B; /* emerald-800 */
             margin-top:0;
        }
         h2 { margin-top: 1.5rem; }
         h3 { margin-top: 1.25rem; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        th, td {
            border: 1px solid #A3A3A3; /* neutral-400 */
            padding: 0.75rem;
            text-align: left;
        }
        th {
            background-color: #E5E5E5; /* neutral-200 */
            color: #065F46; /* emerald-700 */
        }
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        pre {
            background-color: #F3F4F6; /* gray-100 */
            color: #1F2937; /* gray-800 */
            padding: 1rem;
            border-radius: 0.375rem;
            overflow-x: auto;
            position: relative;
            font-size: 0.875rem;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #10B981; /* emerald-500 */
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .copy-btn:hover {
            background-color: #059669; /* emerald-600 */
        }
        .interactive-card {
            background-color: white;
            border: 1px solid #D4D4D4; /* neutral-300 */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: box-shadow 0.3s;
        }
        .interactive-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
        }
        .interactive-card-content {
            display: none;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px dashed #A3A3A3; /* neutral-400 */
        }
        .tab-button {
            background-color: #E5E5E5; /* neutral-200 */
            color: #065F46; /* emerald-700 */
            padding: 0.5rem 1rem;
            border-radius: 0.375rem 0.375rem 0 0;
            font-weight: 500;
            font-size: 0.875rem;
        }
        .tab-button.active {
            background-color: #065F46; /* emerald-700 */
            color: white;
        }
        .resource-link {
            color: #059669; /* emerald-600 */
            text-decoration: underline;
        }
        .resource-link:hover {
            color: #047857; /* emerald-700 */
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 160px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -80px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .quiz-question-container {
            background-color: white;
            border: 1px solid #D1D5DB; /* gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 1.5rem; /* mb-6 */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* shadow-md */
        }
        .quiz-question-text {
            font-weight: 600; /* font-semibold */
            color: #111827; /* gray-900 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .quiz-options ul {
            list-style-type: none;
            padding-left: 0;
        }
        .quiz-options li {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E5E7EB; /* gray-200 */
            padding: 0.75rem; /* p-3 */
            border-radius: 0.375rem; /* rounded-md */
            margin-bottom: 0.5rem; /* mb-2 */
        }
        .quiz-options li.correct-answer-reveal {
            background-color: #D1FAE5; /* emerald-100 */
            border-color: #6EE7B7; /* emerald-300 */
            font-weight: 600;
        }
         .quiz-options li.incorrect-answer-reveal {
            /* Optional: style for incorrect options if needed after reveal */
        }
        .show-answer-btn {
            background-color: #10B981; /* emerald-500 */
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 1rem; /* mt-4 */
        }
        .show-answer-btn:hover {
            background-color: #059669; /* emerald-600 */
        }
        .answer-content {
            background-color: #F0FDF4; /* green-50 */
            border: 1px solid #A7F3D0; /* green-200 */
            padding: 1rem; /* p-4 */
            margin-top: 1rem; /* mt-4 */
            border-radius: 0.375rem; /* rounded-md */
        }
        .answer-content strong {
            color: #065F46; /* emerald-700 */
        }
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
        .mobile-overlay.show {
            display: block;
        }
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
        }
        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: #065F46;
            margin: 3px 0;
            transition: 0.3s;
        }
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
            .sidebar {
                position: fixed;
                z-index: 50;
                height: 100vh;
                width: 16rem;
            }
            .sidebar.mobile-hidden {
                transform: translateX(-100%);
            }
            .main-content {
                margin-left: 0 !important;
            }
            .mobile-header {
                display: block;
            }
            .tab-button {
                padding: 0.375rem 0.75rem;
                font-size: 0.75rem;
            }
            .quiz-question-container {
                padding: 1rem;
            }
            h1.text-3xl {
                font-size: 1.5rem;
            }
            h2.text-2xl {
                font-size: 1.25rem;
            }
            h3.text-xl {
                font-size: 1.125rem;
            }
        }
        @media (min-width: 769px) {
            .mobile-header {
                display: none;
            }
            .sidebar {
                position: fixed;
                transform: translateX(0) !important;
            }
            .main-content {
                margin-left: 16rem;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Mobile Header -->
    <div class="mobile-header bg-white border-b border-neutral-200 p-4 md:hidden">
        <div class="flex items-center justify-between">
            <h1 class="text-lg font-bold text-emerald-800">PostGIS Lecture</h1>
            <button class="hamburger" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </div>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileMenu()"></div>

    <aside class="sidebar w-64 min-h-screen p-4 space-y-2 fixed top-0 left-0 h-full overflow-y-auto mobile-hidden md:transform-none" id="sidebar">
        <h1 class="text-xl font-bold mb-6 text-center text-emerald-800 hidden md:block">PostGIS Lecture</h1>
        <nav>
            <a href="#overview" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Overview</a>
            <a href="#why-spatial-db" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Why Spatial Databases?</a>
            <a href="#postgis-basics" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">PostGIS Fundamentals</a>
            <a href="#connecting" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Connecting & Querying</a>
            <a href="#use-cases" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Real-World Applications</a>
            <a href="#pop-quiz" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Pop Quiz</a>
            <a href="#summary-resources" class="nav-link block py-2 px-4 rounded-md" onclick="closeMobileMenu()">Summary & Resources</a>
        </nav>
    </aside>

    <main class="main-content flex-1 p-4 md:p-8 pt-20 md:pt-8 overflow-y-auto">
        <section id="overview" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Introduction to Spatial Databases (PostGIS) for Public Health Research</h1>
            <p class="text-base md:text-lg text-neutral-700 mb-2">Welcome! This interactive application explores the concepts and benefits of using PostGIS spatial databases in public health research. It's designed for researchers who may have limited prior experience with databases or programming but are familiar with public health data.</p>
            <p class="text-sm md:text-base text-neutral-600">Navigate through the sections using the sidebar to learn about why spatial databases are crucial, understand PostGIS basics, see how to connect using R and Python, explore real-world use cases, test your knowledge with a pop quiz, and find resources for further learning.</p>
            <div class="key-takeaway">
                <p><strong>Overall Goal:</strong> To introduce the concept and benefits of using PostGIS spatial databases in public health research and demonstrate basic data access using R and Python.</p>
            </div>
        </section>

        <section id="why-spatial-db" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Why Spatial Databases?</h1>
            <p class="mb-4 text-neutral-700">This section delves into the importance of spatial data in public health and the limitations of traditional data storage methods like CSVs and Shapefiles, highlighting the need for robust database solutions like PostGIS.</p>

            <h2 class="text-2xl font-semibold">What is Spatial Data in Public Health?</h2>
            <p>Spatial data links information to a specific location on Earth. In public health, understanding "where" health events occur, vulnerable populations reside, and services are located is fundamental.</p>
            <p class="mt-2">Examples include:</p>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li>Mapping disease outbreaks (e.g., influenza spread, cancer mortality rates by state).</li>
                <li>Locations of hospitals/clinics (assessing geographic accessibility).</li>
                <li>Patient addresses (anonymized/aggregated, for understanding distribution).</li>
                <li>Environmental exposure sources (e.g., pollution sites near communities).</li>
                <li>Demographic data aggregated to geographic areas (e.g., census tracts, zip codes).</li>
            </ul>
            <p>Visualizing such data on maps can reveal important characteristics or trends not apparent from tabular data alone. This enables targeted, geographically-focused interventions.</p>
            <div class="key-takeaway">
                <p><strong>Key takeaway:</strong> Spatial context is crucial in understanding and addressing many public health issues.</p>
            </div>

            <h2 class="text-2xl font-semibold mt-6">Limitations of Traditional Data Storage & The Need for Databases</h2>
            <p>While CSVs and Shapefiles are common, they have significant limitations, especially for large, complex datasets or collaborative work.</p>

            <div id="csv-challenges-card" class="interactive-card">
                <h3 class="text-xl font-semibold">Challenges with CSV Files</h3>
                <div class="interactive-card-content">
                    <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                        <li><strong>No inherent spatial understanding:</strong> Coordinates are plain numbers; system must be explicitly defined.</li>
                        <li><strong>Data type ambiguity:</strong> No enforced data types, can lead to precision loss (e.g., ZIP codes losing leading zeros).</li>
                        <li><strong>Inconsistent formatting:</strong> Issues with parsing, delimiters, special characters.</li>
                        <li><strong>Limited querying:</strong> No built-in spatial query capabilities.</li>
                        <li><strong>Scalability issues:</strong> Poor performance with very large datasets.</li>
                        <li><strong>Data integrity/security:</strong> Lacks encryption, password protection, validation.</li>
                    </ul>
                </div>
            </div>

            <div id="shapefile-challenges-card" class="interactive-card mt-4">
                <h3 class="text-xl font-semibold">Challenges with Shapefiles</h3>
                <div class="interactive-card-content">
                    <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                        <li><strong>File proliferation:</strong> A single "shapefile" is multiple files (.shp, .shx, .dbf, .prj).</li>
                        <li><strong>Data duplication/inconsistency:</strong> Easy to create multiple versions, leading to redundancy.</li>
                        <li><strong>Attribute limitations:</strong> Field names limited to 10 chars; no null values (often uses arbitrary numbers); dates without time; 2GB file size limit.</li>
                        <li><strong>Limited querying/analysis:</strong> Complex spatial queries require external GIS and convoluted workflows.</li>
                        <li><strong>No concurrent access:</strong> Not designed for simultaneous multi-user access, leading to versioning issues.</li>
                    </ul>
                </div>
            </div>
            
            <p class="mt-4">These limitations can undermine research quality, reproducibility, and collaboration. Relational databases (like PostgreSQL) and specialized spatial databases (like PostGIS, an extension for PostgreSQL) address these challenges.</p>
            
            <h3 class="text-xl font-semibold mt-6">Summary of Challenges: Traditional vs. Database Approach</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Issue</th>
                            <th>Example with CSVs</th>
                            <th>Example with Shapefiles</th>
                            <th>Impact on Public Health Research</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Data Integrity</strong></td>
                            <td>Latitude/Longitude stored as text, potential precision loss.</td>
                            <td>Field name "ENVIRONMENTAL_EXPOSURE_LEVEL" truncated. Nulls replaced with 0.</td>
                            <td>Inaccurate analysis, misinterpretation, inability to distinguish missing from true zero.</td>
                        </tr>
                        <tr>
                            <td><strong>Scalability</strong></td>
                            <td>Slow processing of 1 million patient address records.</td>
                            <td>2GB file size limit reached with detailed national boundary data.</td>
                            <td>Inability to analyze large-scale or high-resolution datasets efficiently.</td>
                        </tr>
                        <tr>
                            <td><strong>Spatial Querying</strong></td>
                            <td>Cannot directly query for clinics within 1km of a patient address.</td>
                            <td>Requires external GIS and complex workflows for proximity analysis.</td>
                            <td>Slow, inefficient, and error-prone execution of complex spatial questions.</td>
                        </tr>
                        <tr>
                            <td><strong>Collaboration</strong></td>
                            <td>High risk of overwriting data if multiple users edit a shared CSV.</td>
                            <td>Difficult to merge changes from different team members.</td>
                            <td>Hinders teamwork, potential data loss, outdated analyses, reproducibility issues.</td>
                        </tr>
                        <tr>
                            <td><strong>Coordinate System Info</strong></td>
                            <td>No embedded coordinate system information.</td>
                            <td>`.prj` file stores system, but can be missing/incorrect.</td>
                            <td>Risk of incorrect spatial analysis if data misaligned.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="key-takeaway mt-4">
                <p><strong>Key takeaway:</strong> Spatial databases offer a more robust, efficient, and powerful way to manage and analyze geographic health data, overcoming critical limitations of traditional file-based approaches.</p>
            </div>
        </section>

        <section id="postgis-basics" class="content-section">
            <h1 class="text-3xl font-bold mb-4">PostGIS Fundamentals</h1>
            <p class="mb-4 text-neutral-700">This section introduces PostgreSQL, the PostGIS extension, and core spatial concepts essential for using PostGIS effectively in public health research.</p>

            <h2 class="text-2xl font-semibold">What is PostgreSQL and PostGIS?</h2>
            <p><strong>PostgreSQL:</strong> A powerful, open-source object-relational database system (ORDBMS). Known for reliability, data integrity, scalability, and extensibility. It's free and community-supported.</p>
            <p class="mt-2"><strong>PostGIS:</strong> An extension to PostgreSQL that "teaches" it to understand, store, manage, and analyze geographic objects. It adds:</p>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li>Spatial Data Types (e.g., `geometry`, `geography`).</li>
                <li>Spatial Indexes (e.g., R-Tree based on GiST for fast spatial searches).</li>
                <li>Spatial Functions (hundreds for analysis, e.g., distance, intersection, buffers).</li>
            </ul>
            <p class="mt-2">Analogy: PostgreSQL is the filing cabinet; PostGIS provides special folders and tools for maps within it.</p>
            <div class="key-takeaway">
                <p><strong>Key takeaway:</strong> PostGIS turns a regular (but very powerful) database (PostgreSQL) into a spatial powerhouse, specifically designed to handle and analyze geographic information.</p>
            </div>

            <h2 class="text-2xl font-semibold mt-6">Core Spatial Concepts in PostGIS</h2>
            
            <h3 class="text-xl font-semibold mt-4">1. Geometry Types</h3>
            <p>PostGIS stores geographic features as specific geometry types. Click each type to see examples:</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                <div id="geom-point" class="interactive-card p-4 rounded-lg shadow">
                    <h4 class="text-lg font-semibold text-center">Point <span class="text-2xl">üìç</span></h4>
                    <div class="interactive-card-content text-sm">
                        <p>Represents a single location (e.g., X,Y coordinates).</p>
                        <p class="mt-1"><strong>Public Health Examples:</strong> Patient residence, clinic location, disease case site, water sample point.</p>
                    </div>
                </div>
                <div id="geom-line" class="interactive-card p-4 rounded-lg shadow">
                    <h4 class="text-lg font-semibold text-center">LineString <span class="text-2xl">„Ä∞Ô∏è</span></h4>
                    <div class="interactive-card-content text-sm">
                        <p>Represents linear features (sequence of connected points).</p>
                        <p class="mt-1"><strong>Public Health Examples:</strong> Roads, rivers, public transport routes, disease vector paths.</p>
                    </div>
                </div>
                <div id="geom-polygon" class="interactive-card p-4 rounded-lg shadow">
                    <h4 class="text-lg font-semibold text-center">Polygon <span class="text-2xl">üèûÔ∏è</span></h4>
                    <div class="interactive-card-content text-sm">
                        <p>Represents an area (closed sequence of points).</p>
                        <p class="mt-1"><strong>Public Health Examples:</strong> Administrative boundaries (counties, states), service areas, exposure zones, park boundaries.</p>
                    </div>
                </div>
            </div>
            <p class="mt-2 text-sm text-neutral-600">PostGIS also supports Multi-geometries (MultiPoint, MultiLineString, MultiPolygon) which are collections of the same geometry type.</p>

            <h3 class="text-xl font-semibold mt-6">2. Spatial Reference Systems (SRS) / SRID</h3>
            <p>An SRS (or CRS) defines how coordinate values relate to actual locations on Earth. It's the "language" or "map projection" your data speaks.</p>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li><strong>Crucial for:</strong> Aligning different data layers correctly and ensuring meaningful measurements (distance, area).</li>
                <li><strong>SRID (Spatial Reference Identifier):</strong> A unique integer ID for each SRS in PostGIS (e.g., stored in `spatial_ref_sys` table).</li>
                <li><strong>Common Examples:</strong>
                    <ul class="list-disc list-inside ml-6">
                        <li><strong>WGS84 (EPSG:4326):</strong> Geographic (lat/lon in degrees), used by GPS.</li>
                        <li><strong>Projected Systems (e.g., UTM, State Plane):</strong> Transform Earth's surface to a flat plane (units in meters/feet), better for accurate local distance/area calculations.</li>
                    </ul>
                </li>
                <li><strong>Rule:</strong> All spatial data in PostGIS MUST have a defined SRID. For operations between layers, SRIDs should match or be transformable (using `ST_Transform()`).</li>
            </ul>
            <div class="p-4 border border-dashed border-neutral-400 rounded-md mt-2 bg-white">
                <p class="font-semibold text-center">Conceptual Visualization: SRID Alignment</p>
                <div class="flex flex-col md:flex-row justify-around items-center mt-2 text-sm space-y-2 md:space-y-0">
                    <div class="text-center">
                        <p class="text-red-500">Layer A (SRID: X)</p>
                        <p class="text-blue-500">Layer B (SRID: Y)</p>
                        <p class="mt-1"><strong>Misaligned!</strong> üö´</p>
                    </div>
                    <div class="text-2xl">‚û°Ô∏è</div>
                    <div class="text-center">
                        <p class="text-green-600">Layer A (Transformed to SRID: Z)</p>
                        <p class="text-green-600">Layer B (Transformed to SRID: Z)</p>
                        <p class="mt-1"><strong>Correctly Aligned!</strong> ‚úÖ</p>
                    </div>
                </div>
                <p class="text-xs text-center mt-2 text-neutral-500">Illustrates that layers with different SRIDs won't overlay correctly unless transformed to a common system.</p>
            </div>


            <h3 class="text-xl font-semibold mt-6">3. Spatial Indexes (Briefly)</h3>
            <p>Like an index in a book, but for locations. They dramatically speed up spatial queries (e.g., "what's near X?", "what's inside Y?").</p>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li><strong>Analogy:</strong> A GPS for the database to rapidly find spatial data.</li>
                <li><strong>How (simplified):</strong> Pre-processes and organizes spatial data (often using bounding boxes) so the database doesn't have to scan everything. Uses structures like R-Trees.</li>
                <li><strong>Usage:</strong> You create a spatial index on geometry columns. PostGIS query planner uses it automatically.</li>
            </ul>
            <div class="key-takeaway mt-4">
                <p><strong>Key takeaway:</strong> PostGIS stores geographic shapes (geometries) and understands their real-world coordinate systems (SRIDs), using spatial indexes to enable powerful and efficient spatial analysis.</p>
            </div>
        </section>

        <section id="connecting" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Connecting to & Querying PostGIS</h1>
            <p class="mb-4 text-neutral-700">This section covers general principles for database connections and demonstrates how to connect to PostGIS and retrieve data using R and Python, along with a brief note on SQL.</p>

            <h2 class="text-2xl font-semibold">General Connection Principles</h2>
            <p>To access any database, you need standard parameters:</p>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li><strong>Hostname (Server Address):</strong> Network address of the database server (e.g., `localhost`, IP address, domain name).</li>
                <li><strong>Port:</strong> Communication endpoint (default for PostgreSQL is `5432`).</li>
                <li><strong>Database Name (dbname):</strong> The specific database you want to connect to.</li>
                <li><strong>Username:</strong> Your database username.</li>
                <li><strong>Password:</strong> Password for the username.</li>
            </ul>
            <p class="mt-2">For demos, a read-only account is used to prevent accidental data modification.</p>
            <div class="key-takeaway">
                <p><strong>Key takeaway:</strong> These five pieces of information are the standard keys needed to unlock access to almost any database.</p>
            </div>

            <div class="mt-6">
                <div class="flex flex-col md:flex-row border-b border-neutral-300">
                    <button class="tab-button py-2 px-4 active" onclick="openTab(event, 'r-code')">Using R with PostGIS</button>
                    <button class="tab-button py-2 px-4" onclick="openTab(event, 'python-code')">Using Python with PostGIS</button>
                </div>

                <div id="r-code" class="tab-content p-4 bg-white rounded-b-md border border-t-0 border-neutral-300">
                    <h3 class="text-xl font-semibold mb-2">Using R with PostGIS</h3>
                    <p>Key R Packages: <strong>`sf`</strong> (Simple Features for spatial data), <strong>`DBI`</strong> (DataBase Interface), <strong>`RPostgres`</strong> (PostgreSQL driver).</p>
                    <p class="text-sm text-neutral-600 mb-2">The following snippet shows how to connect, read data, and disconnect. Replace placeholder details with your actual database credentials.</p>
                    <div class="code-container relative">
                        <pre><code class="language-r">
# 1. Load necessary libraries
# install.packages(c("sf", "DBI", "RPostgres")) # Run once if not installed
library(sf)
library(DBI)
library(RPostgres)

# 2. Database connection parameters (REPLACE with actual details)
db_host <- "your_host_address"
db_port <- 5432
db_name <- "your_sample_db_name"
db_user <- "readonly_user"
db_password <- "readonly_password"

# 3. Establish connection
con <- dbConnect(RPostgres::Postgres(),
                 dbname = db_name,
                 host = db_host,
                 port = db_port,
                 user = db_user,
                 password = db_password)

# 4. Read a spatial table into an sf object
# Example: Read 5 features from 'health_clinics' table
sql_query_clinics <- "SELECT objectid, clinic_name, address, geom FROM health_clinics LIMIT 5;"
health_data_sf <- st_read(con, query = sql_query_clinics)

# 5. View the loaded data
print(health_data_sf)
# plot(st_geometry(health_data_sf)) # Simple plot

# 6. Close the connection
dbDisconnect(con)
                        </code></pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="key-takeaway mt-4">
                        <p><strong>Key takeaway:</strong> R, with packages like `sf` and `DBI`, can easily connect to PostGIS and bring spatial data directly into a familiar analysis environment.</p>
                    </div>
                </div>

                <div id="python-code" class="tab-content p-4 bg-white rounded-b-md border border-t-0 border-neutral-300" style="display:none;">
                    <h3 class="text-xl font-semibold mb-2">Using Python with PostGIS</h3>
                    <p>Key Python Packages: <strong>`geopandas`</strong> (spatial data with pandas-like interface), <strong>`psycopg2-binary`</strong> (PostgreSQL adapter), <strong>`sqlalchemy`</strong> (SQL toolkit, used by geopandas), <strong>`geoalchemy2`</strong> (spatial support for SQLAlchemy).</p>
                    <p class="text-sm text-neutral-600 mb-2">The following snippet shows how to connect, read data, and manage the connection. Replace placeholder details.</p>
                    <div class="code-container relative">
                        <pre><code class="language-python">
# 1. Import necessary libraries
# !pip install geopandas psycopg2-binary sqlalchemy geoalchemy2 # Run once if not installed
import geopandas as gpd
from sqlalchemy import create_engine

# 2. Database connection parameters (REPLACE with actual details)
db_host = "your_host_address"
db_port = 5432
db_name = "your_sample_db_name"
db_user = "readonly_user"
db_password = "readonly_password"

# 3. Create a SQLAlchemy engine
engine_str = f"postgresql://{db_user}:{db_password}@{db_host}:{db_port}/{db_name}"
engine = create_engine(engine_str)

# 4. Read a spatial table into a GeoDataFrame
# Example: Read 5 features from 'health_clinics' table
sql_query_clinics = "SELECT objectid, clinic_name, address, geom FROM health_clinics LIMIT 5;"
# Ensure 'geom_col' matches your geometry column name (often 'geom' or 'geometry')
health_data_gdf = gpd.read_postgis(sql_query_clinics, engine, geom_col='geom')

# 5. View the loaded data
print(health_data_gdf.head())
# health_data_gdf.plot() # Simple plot

# 6. Engine disposal (good practice in longer scripts)
# engine.dispose()
                        </code></pre>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                     <div class="key-takeaway mt-4">
                        <p><strong>Key takeaway:</strong> Python, with `geopandas` and `SQLAlchemy`, offers a powerful and intuitive way to work with PostGIS data, especially for those familiar with `pandas`.</p>
                    </div>
                </div>
            </div>

            <h3 class="text-xl font-semibold mt-6 mb-2">Brief Note on SQL</h3>
            <p>The `query` parameter in `st_read()` (R) and `read_postgis()` (Python) uses SQL (Structured Query Language). PostGIS extends SQL with many spatial functions (e.g., `ST_Distance`, `ST_Intersects`, `ST_Contains`, `ST_Buffer`, `ST_DWithin`).</p>
            <p class="mt-2">Performing spatial operations directly in the database using these SQL functions is often very efficient, as it processes data on the server before transferring it to R/Python.</p>
            <div class="key-takeaway mt-4">
                <p><strong>Key takeaway:</strong> Learning basic SQL, augmented with PostGIS's spatial functions, unlocks the ability to perform powerful and efficient data selection and manipulation directly within the database.</p>
            </div>
        </section>

        <section id="use-cases" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Real-World Applications</h1>
            <p class="mb-4 text-neutral-700">This section explores common public health scenarios where PostGIS and its spatial SQL capabilities can answer specific research questions, moving beyond simple mapping to sophisticated spatial epidemiology.</p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="p-6 bg-white rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Use Case 1: Disease Surveillance & Cluster Analysis</h3>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Question:</strong> Where are disease cases concentrated? Are there more cases in District A vs. B (accounting for population)?</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>PostGIS Role:</strong> Store case locations (points) and administrative boundaries (polygons).</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Conceptual SQL/Function:</strong> `ST_Contains(district_geom, case_geom)` to count points in polygons. Aggregate by district, calculate rates using population data.</p>
                    <div class="mt-3 p-3 border border-dashed border-emerald-300 rounded-md bg-emerald-50">
                        <p class="font-medium text-emerald-700 text-center">Conceptual Map: Disease Cases in Districts</p>
                        <p class="text-xs text-emerald-600 text-center mt-1">Imagine a map with district polygons. Points representing disease cases are overlaid. Districts are color-coded by disease rate (cases per population).</p>
                    </div>
                </div>

                <div class="p-6 bg-white rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Use Case 2: Healthcare Accessibility</h3>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Question:</strong> How many households are within 5km of a clinic? Which clinics serve a specific neighborhood?</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>PostGIS Role:</strong> Store clinic locations (points), household locations (points) or census block centroids/polygons.</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Conceptual SQL/Function:</strong> `ST_DWithin(clinic_geom, household_geom, 5000)` for proximity. `ST_Buffer(clinic_geom, 5000)` to create service areas, then `ST_Intersects` with neighborhoods.</p>
                     <div class="mt-3 p-3 border border-dashed border-emerald-300 rounded-md bg-emerald-50">
                        <p class="font-medium text-emerald-700 text-center">Conceptual Map: Clinic Access</p>
                        <p class="text-xs text-emerald-600 text-center mt-1">Imagine clinic points with 5km circular buffers. Households or census blocks are shown, highlighted if they fall within a buffer, indicating access.</p>
                    </div>
                </div>

                <div class="p-6 bg-white rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-2">Use Case 3: Environmental Exposure Assessment</h3>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Question:</strong> Which communities are exposed to pollutants from a specific industrial site (e.g., within a 2km buffer)? Estimated population exposed?</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>PostGIS Role:</strong> Store pollution source (point/polygon), community boundaries (polygons with population attributes).</p>
                    <p class="text-sm text-neutral-600 mb-1"><strong>Conceptual SQL/Function:</strong> `ST_Buffer(source_geom, 2000)` for exposure zone. `ST_Intersects` with community polygons. `ST_Intersection` to estimate exposed population proportion.</p>
                     <div class="mt-3 p-3 border border-dashed border-emerald-300 rounded-md bg-emerald-50">
                        <p class="font-medium text-emerald-700 text-center">Conceptual Map: Exposure Zones</p>
                        <p class="text-xs text-emerald-600 text-center mt-1">Imagine an industrial site, a 2km buffer around it. Community polygons (e.g., census tracts) are shown, highlighted if they overlap the buffer.</p>
                    </div>
                </div>
            </div>
            <div class="key-takeaway mt-6">
                <p><strong>Key takeaway:</strong> PostGIS enables sophisticated spatial questions relevant to public health to be answered efficiently, often by performing complex calculations directly in the database using spatial SQL, leading to actionable insights.</p>
            </div>
        </section>

        <section id="pop-quiz" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Pop Quiz: Test Your Knowledge!</h1>
            <p class="mb-6 text-neutral-700">Let's see what you've learned. For each question, consider the options and then click "Show Answer" to see the correct choice and explanation.</p>

            <div class="quiz-question-container">
                <h4 class="quiz-question-text">Question 1: What is a key advantage of using a spatial database like PostGIS over traditional shapefiles for collaborative public health research?</h4>
                <div class="quiz-options">
                    <ul>
                        <li>A) Shapefiles support more advanced SQL queries.</li>
                        <li data-correct="false">B) PostGIS allows for robust concurrent access and data integrity.</li>
                        <li>C) Shapefiles are better for handling very large datasets.</li>
                        <li>D) PostGIS does not require understanding coordinate systems.</li>
                    </ul>
                </div>
                <button class="show-answer-btn" onclick="toggleAnswer(this, 'B')">Show Answer</button>
                <div class="answer-content" style="display:none;">
                    <p><strong>Correct Answer: B</strong></p>
                    <p><strong>Rationale:</strong> PostGIS, as a database system, is designed for concurrent multi-user access and enforces data integrity rules, which are critical for collaborative projects. Shapefiles are prone to versioning issues and lack these robust features.</p>
                </div>
            </div>

            <div class="quiz-question-container">
                <h4 class="quiz-question-text">Question 2: Which PostGIS geometry type would be most suitable for representing the boundaries of administrative districts (e.g., counties)?</h4>
                <div class="quiz-options">
                    <ul>
                        <li>A) Point</li>
                        <li>B) LineString</li>
                        <li data-correct="false">C) Polygon</li>
                        <li>D) MultiPoint</li>
                    </ul>
                </div>
                <button class="show-answer-btn" onclick="toggleAnswer(this, 'C')">Show Answer</button>
                <div class="answer-content" style="display:none;">
                    <p><strong>Correct Answer: C</strong></p>
                    <p><strong>Rationale:</strong> Polygons are used to represent areas with defined boundaries, making them the appropriate choice for administrative districts like counties or states.</p>
                </div>
            </div>

            <div class="quiz-question-container">
                <h4 class="quiz-question-text">Question 3: What is the primary purpose of an SRID (Spatial Reference Identifier) in PostGIS?</h4>
                <div class="quiz-options">
                    <ul>
                        <li>A) To uniquely identify each record in a table.</li>
                        <li>B) To define the visual style of map features.</li>
                        <li data-correct="false">C) To define the coordinate system and give real-world meaning to geometric data.</li>
                        <li>D) To speed up non-spatial attribute queries.</li>
                    </ul>
                </div>
                <button class="show-answer-btn" onclick="toggleAnswer(this, 'C')">Show Answer</button>
                <div class="answer-content" style="display:none;">
                    <p><strong>Correct Answer: C</strong></p>
                    <p><strong>Rationale:</strong> The SRID defines the coordinate reference system (e.g., WGS84, UTM Zone), which is essential for interpreting the stored X/Y coordinates as meaningful locations on Earth and for ensuring data layers align correctly.</p>
                </div>
            </div>

            <div class="quiz-question-container">
                <h4 class="quiz-question-text">Question 4: When reading spatial data from PostGIS into R using `sf::st_read()` or Python using `geopandas.read_postgis()`, what is a benefit of using a SQL query within these functions?</h4>
                <div class="quiz-options">
                    <ul>
                        <li>A) It's the only way to load any data.</li>
                        <li data-correct="false">B) It allows for server-side filtering and processing, which can be more efficient for large datasets.</li>
                        <li>C) It bypasses the need for database connection parameters.</li>
                        <li>D) It automatically converts data to a local file format like a shapefile.</li>
                    </ul>
                </div>
                <button class="show-answer-btn" onclick="toggleAnswer(this, 'B')">Show Answer</button>
                <div class="answer-content" style="display:none;">
                    <p><strong>Correct Answer: B</strong></p>
                    <p><strong>Rationale:</strong> Using a SQL query allows you to select specific columns, filter rows, or even perform spatial operations directly on the database server before the data is transferred to R or Python. This is very efficient, especially with large tables.</p>
                </div>
            </div>

            <div class="quiz-question-container">
                <h4 class="quiz-question-text">Question 5: To find all health clinics within a 2km radius of a patient's address in PostGIS, which spatial function is most directly applicable and efficient for this proximity query?</h4>
                <div class="quiz-options">
                    <ul>
                        <li>A) `ST_Area()`</li>
                        <li data-correct="false">B) `ST_DWithin()`</li>
                        <li>C) `ST_Union()`</li>
                        <li>D) `ST_Centroid()`</li>
                    </ul>
                </div>
                <button class="show-answer-btn" onclick="toggleAnswer(this, 'B')">Show Answer</button>
                <div class="answer-content" style="display:none;">
                    <p><strong>Correct Answer: B</strong></p>
                    <p><strong>Rationale:</strong> `ST_DWithin(geometry1, geometry2, distance)` is specifically designed to efficiently check if two geometries are within a certain distance of each other, and it can leverage spatial indexes effectively for this type of query.</p>
                </div>
            </div>
        </section>

        <section id="summary-resources" class="content-section">
            <h1 class="text-3xl font-bold mb-4">Summary & Resources</h1>
            <p class="mb-4 text-neutral-700">This final section summarizes the key benefits of PostGIS for public health research and provides a list of resources for continued learning.</p>

            <h2 class="text-2xl font-semibold">Quick Summary & Benefits Recap</h2>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600 space-y-1">
                <li><strong>Overcomes Flat File Limitations:</strong> Structured, secure, scalable data storage; better data integrity, attribute handling, concurrent access.</li>
                <li><strong>Enables Complex Spatial Analysis:</strong> Rich library of spatial SQL functions for proximity, containment, overlay, buffering directly in the database.</li>
                <li><strong>Promotes Data Integrity and Scalability:</strong> Enforces data types, relationships; efficiently manages very large datasets.</li>
                <li><strong>Facilitates Collaboration:</strong> Multi-user environment for centralized, consistent data access.</li>
                <li><strong>Integrates with Familiar Analysis Environments:</strong> Easy access from R (sf, DBI) and Python (geopandas, SQLAlchemy).</li>
            </ul>
            
            <h2 class="text-2xl font-semibold mt-6">Q&A and Further Resources</h2>
            <p>To continue your learning journey:</p>
            <h3 class="text-xl font-semibold mt-4">Official Websites:</h3>
            <ul class="list-disc list-inside ml-4 my-2">
                <li>PostGIS: <a href="https://postgis.net" target="_blank" rel="noopener" class="resource-link">postgis.net</a></li>
                <li>PostgreSQL: <a href="https://postgresql.org" target="_blank" rel="noopener" class="resource-link">postgresql.org</a></li>
            </ul>

            <h3 class="text-xl font-semibold mt-4">Key R Packages Documentation:</h3>
            <ul class="list-disc list-inside ml-4 my-2">
                <li>`sf` (Simple Features): <a href="https://r-spatial.github.io/sf/" target="_blank" rel="noopener" class="resource-link">r-spatial.github.io/sf/</a></li>
                <li>`DBI` (DataBase Interface): <a href="https://dbi.r-dbi.org" target="_blank" rel="noopener" class="resource-link">dbi.r-dbi.org</a></li>
                <li>`RPostgres`: <a href="https://rpostgres.r-dbi.org" target="_blank" rel="noopener" class="resource-link">rpostgres.r-dbi.org</a></li>
            </ul>

            <h3 class="text-xl font-semibold mt-4">Key Python Packages Documentation:</h3>
            <ul class="list-disc list-inside ml-4 my-2">
                <li>`geopandas`: <a href="https://geopandas.org" target="_blank" rel="noopener" class="resource-link">geopandas.org</a></li>
                <li>`SQLAlchemy`: <a href="https://sqlalchemy.org" target="_blank" rel="noopener" class="resource-link">sqlalchemy.org</a></li>
                <li>`psycopg2` (PostgreSQL adapter): <a href="https://www.psycopg.org/docs/" target="_blank" rel="noopener" class="resource-link">psycopg.org/docs/</a> (psycopg2/3)</li>
            </ul>

            <h3 class="text-xl font-semibold mt-4">General Tutorial Search Terms:</h3>
            <ul class="list-disc list-inside ml-4 my-2 text-neutral-600">
                <li>"PostGIS Introduction tutorial"</li>
                <li>"GeoPandas PostGIS tutorial"</li>
                <li>"R sf PostGIS tutorial"</li>
            </ul>
            <p class="mt-4">Hands-on practice with the provided sample database details and code snippets is highly encouraged!</p>
        </section>
    </main>

    <script>
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const interactiveCards = document.querySelectorAll('.interactive-card');
        const tabButtons = document.querySelectorAll('.tab-button');

        function updateActiveNavAndSection(hash) {
            navLinks.forEach(link => {
                if (link.getAttribute('href') === hash) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            contentSections.forEach(section => {
                if ('#' + section.id === hash) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
        }
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href');
                // No e.preventDefault() to allow URL hash to update naturally
                updateActiveNavAndSection(targetId); // Update based on click before hashchange might fire
                window.location.hash = targetId; // Ensure hash is set
            });
        });

        interactiveCards.forEach(card => {
            card.addEventListener('click', function() {
                const content = this.querySelector('.interactive-card-content');
                if (content) {
                    content.style.display = content.style.display === 'none' || content.style.display === '' ? 'block' : 'none';
                }
            });
        });

        function openTab(event, tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tc => tc.style.display = 'none');
            
            document.querySelectorAll('.tab-button').forEach(tb => tb.classList.remove('active'));
            
            document.getElementById(tabName).style.display = 'block';
            event.currentTarget.classList.add('active');
        }

        function copyCode(buttonElement) {
            const preElement = buttonElement.previousElementSibling;
            const codeElement = preElement.querySelector('code');
            const textToCopy = codeElement.innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = textToCopy;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            let originalButtonText = buttonElement.innerText;
            
            try {
                document.execCommand('copy');
                buttonElement.innerText = 'Copied!';
            } catch (err) {
                console.error('Failed to copy text: ', err);
                buttonElement.innerText = 'Failed!';
            }
            
            document.body.removeChild(tempTextArea);

            setTimeout(() => {
                buttonElement.innerText = originalButtonText;
            }, 2000);
        }

        function toggleAnswer(buttonElement, correctAnswerLetter) {
            const questionContainer = buttonElement.closest('.quiz-question-container');
            const answerContent = questionContainer.querySelector('.answer-content');
            const optionsList = questionContainer.querySelectorAll('.quiz-options li');

            const isHidden = answerContent.style.display === 'none' || answerContent.style.display === '';
            answerContent.style.display = isHidden ? 'block' : 'none';
            buttonElement.textContent = isHidden ? 'Hide Answer' : 'Show Answer';

            if (isHidden) {
                optionsList.forEach(li => {
                    // The options are A, B, C, D. We extract the first letter.
                    const optionLetter = li.textContent.trim().substring(0, 1);
                    if (optionLetter === correctAnswerLetter) {
                        li.classList.add('correct-answer-reveal');
                        // Mark data-correct attribute for potential future use, though not strictly needed for current reveal logic
                        li.dataset.correct = "true"; 
                    } else {
                        li.classList.remove('correct-answer-reveal'); // Ensure it's not marked if re-clicked
                        li.dataset.correct = "false";
                    }
                });
            } else {
                 optionsList.forEach(li => {
                    li.classList.remove('correct-answer-reveal');
                 });
            }
        }

        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.toggle('mobile-hidden');
            overlay.classList.toggle('show');
        }

        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobileOverlay');
            
            sidebar.classList.add('mobile-hidden');
            overlay.classList.remove('show');
        }
        
        function initializePage() {
            const currentHash = window.location.hash || '#overview';
            updateActiveNavAndSection(currentHash);

            if (currentHash === '#connecting') {
                // Ensure the first tab is active if no other tab state is managed
                const rCodeTabButton = document.querySelector('.tab-button[onclick*="r-code"]');
                if (rCodeTabButton && !document.querySelector('.tab-button.active')) {
                    rCodeTabButton.click();
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', initializePage);
        window.addEventListener('hashchange', initializePage);

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger');
            
            if (window.innerWidth <= 768 && 
                !sidebar.contains(event.target) && 
                !hamburger.contains(event.target) && 
                !sidebar.classList.contains('mobile-hidden')) {
                closeMobileMenu();
            }
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileMenu();
            }
        });

    </script>
</body>
</html>
